---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "vmds_policy Resource - vmds"
subcategory: ""
description: |-
  Represents a policy on MDS.
---

# vmds_policy (Resource)

Represents a policy on MDS.

## Example Usage

```terraform
// example of a RABBITMQ policy
resource "vmds_policy" "rabbitmq" {
  name             = "test-tf"
  service_type     = "RABBITMQ"
  permission_specs = [
    {
      permissions = ["read"],
      role        = "read",
      resource    = "cluster:example-cluster-name"
    },
    {
      "permissions" = ["write"],
      "role"        = "write",
      "resource"    = "cluster:example-cluster-name/queue:my-queue"
    }
  ]
}

// example of a NETWORK policy
resource "vmds_policy" "network" {
  name         = "network-policy-from-tf"
  service_type = "NETWORK"
  network_spec = {
    cidr             = "10.22.55.0/24",
    network_port_ids = ["rmq-streams", "rmq-amqps"]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the policy
- `service_type` (String) Type of policy to manage. Supported values are: `RABBITMQ`, `NETWORK`.

### Optional

- `network_spec` (Attributes) Network config to allow access to service resource. Required only for `NETWORK` type policy. (see [below for nested schema](#nestedatt--network_spec))
- `permission_specs` (Attributes List) Permissions to enforce on service resources. Only required for policies other than `NETWORK` type. (see [below for nested schema](#nestedatt--permission_specs))

### Read-Only

- `id` (String) Auto-generated ID of the policy after creation, and can be used to import it from MDS to terraform state.
- `resource_ids` (Set of String) IDs of service resources/instances being managed by the policy.

<a id="nestedatt--network_spec"></a>
### Nested Schema for `network_spec`

Required:

- `cidr` (String) CIDR value to allow access from. Ex: `10.45.66.80/30`
- `network_port_ids` (Set of String) IDs of network ports to open up for access. Please make use of datasource `vmds_network_ports` to get IDs of ports available for services.


<a id="nestedatt--permission_specs"></a>
### Nested Schema for `permission_specs`

Required:

- `permissions` (Set of String) One or more of (monitoring,write,management,policymaker,read,configure). Please make use of datasource `vmds_service_roles` to get roles.
- `resource` (String) The cluster/instance name. Please make use of datasource `vmds_clusters` to get resource.
- `role` (String) One or more of (monitoring,write,management,policymaker,read,configure). Please make use of datasource `vmds_service_roles` to get roles.

## Import

Import is supported using the following syntax:

```shell
# Policy can be imported by specifying the alphanumeric identifier.
terraform import vmds_policy.rabbitmq s546dg29fh2ksh3dfr
```
